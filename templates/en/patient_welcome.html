{% extends "base.html" %}
{% block content %}
<div class="toggle-wrapper">
  <label class="switch">
    <input type="checkbox" id="darkToggle">
    <span class="slider"></span>
  </label>
</div>

<div class="background">
  <div class="glow pink"></div>
  <div class="glow wine"></div>
</div>

<div class="welcome-card">
  <h1 class="title-color">ðŸŒ¸ Welcome, {{ patient_name }}!</h1>
  <div class="glass-box">
    <div class="emoji">ðŸ’–</div>
    <p class="message">
      Your glow is unmatched. We're thrilled you chose our Fractional Rejuvenation experience âœ¨
    </p>
  </div>
  <p class="subtext">Weâ€™d love your feedback to keep improving.</p>

  <form method="get" action="/patient-survey" id="continue-form">
    <input type="hidden" name="session_data" value="{{ session_data|e }}">
    <button type="submit" class="btn-primary">Start Quick Feedback</button>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('darkToggle').addEventListener('change', function() {
    document.body.classList.toggle('dark');
  });

  // Store session
  const data = {{ session_data|tojson|safe }};
  sessionStorage.setItem("patientSessionData", JSON.stringify(data));

  let timeout = setTimeout(() => {
    document.getElementById('continue-form').submit();
  }, 5000);

  document.addEventListener('click', () => clearTimeout(timeout));
  document.addEventListener('keydown', () => clearTimeout(timeout));
});
</script>
{% endblock %}